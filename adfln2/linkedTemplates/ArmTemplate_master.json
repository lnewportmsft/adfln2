{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "adfln2"
		},
		"AzureSqlDWLinkedService_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'AzureSqlDWLinkedService'"
		},
		"AzureSqlDatabaseLinkedService_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'AzureSqlDatabaseLinkedService'"
		},
		"DataMart_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'DataMart'"
		},
		"MyAzureBlobLinkedService_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'MyAzureBlobLinkedService'"
		},
		"SqlServer1_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'SqlServer1'"
		},
		"WorldWideImportersDW_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'WorldWideImportersDW'"
		},
		"lgndatabricks_accessToken": {
			"type": "secureString",
			"metadata": "Secure string for 'accessToken' of 'lgndatabricks'"
		},
		"lgndatalake_accountKey": {
			"type": "secureString",
			"metadata": "Secure string for 'accountKey' of 'lgndatalake'"
		},
		"lgnstorage_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'lgnstorage'"
		},
		"linkedService1_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'linkedService1'"
		},
		"lndb_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'lndb'"
		},
		"southridge_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'southridge'"
		},
		"AzureBlobFSDataDestinationStore1_properties_typeProperties_folderPath": {
			"type": "string",
			"defaultValue": "@dataset().FolderPath"
		},
		"DestinationFilesBlobStore1_properties_typeProperties_fileName": {
			"type": "string",
			"defaultValue": ""
		},
		"DestinationFilesBlobStore1_properties_typeProperties_folderPath": {
			"type": "string",
			"defaultValue": "sinkdata/staged_sink"
		},
		"SinkDataset_properties_typeProperties_fileName": {
			"type": "string",
			"defaultValue": "@CONCAT('Incremental-', pipeline().RunId, '.txt')"
		},
		"SinkDataset_properties_typeProperties_folderPath": {
			"type": "string",
			"defaultValue": "adftutorial/incrementalcopy"
		},
		"SourceAvailabilityBlobStore1_properties_typeProperties_fileName": {
			"type": "string",
			"defaultValue": "_success"
		},
		"SourceAvailabilityBlobStore1_properties_typeProperties_folderPath": {
			"type": "string",
			"defaultValue": "data/source"
		},
		"SourceFilesBlobStore1_properties_typeProperties_fileName": {
			"type": "string",
			"defaultValue": ""
		},
		"SourceFilesBlobStore1_properties_typeProperties_folderPath": {
			"type": "string",
			"defaultValue": "data/source"
		},
		"adfdropoff_properties_typeProperties_fileName": {
			"type": "string",
			"defaultValue": ""
		},
		"adfdropoff_properties_typeProperties_folderPath": {
			"type": "string",
			"defaultValue": "adfdropoff"
		},
		"DroughtMonitorAPI_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "http://usdmdataservices.unl.edu/api/CountyStatistics/GetDroughtSeverityStatisticsByArea"
		},
		"FRED_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://fred.stlouisfed.org/graph/fredgraph.csv?"
		},
		"NOAAFTPServer_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "ftp://ftp.ncdc.noaa.gov/"
		},
		"STLFEDMOIL_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://alfred.stlouisfed.org/graph/alfredgraph.csv?bgcolor=%23e1e9f0&chart_type=column&drp=0&fo=open%20sans&graph_bgcolor=%23ffffff&height=450&mode=alfred&recession_bars=on&txtcolor=%23444444&ts=12&tts=12&width=1168&nt=0&thu=0&trc=0&show_legend=yes&show_axis_titles=yes&show_tooltip=yes&id=STLPCPI,STLPCPI&scale=left,left&cosd=2001-01-01,2001-01-01&coed=2016-01-01,2017-01-01&line_color=%234572a7,%23aa4643&link_values=false,false&line_style=solid,solid&mark_type=none,none&mw=3,3&lw=2,2&ost=-99999,-99999&oet=99999,99999&mma=0,0&fml=a,a&fq=Annual,Annual&fam=avg,avg&fgst=lin,lin&fgsnd=2009-06-01,2009-06-01&line_index=1,2&transformation=lin,lin&vintage_date=2017-11-16,2018-11-15&nd=1969-01-01,2001-01-01"
		},
		"USGSSecretStore_properties_typeProperties_baseUrl": {
			"type": "string",
			"defaultValue": "https://USGS-SecretStore.vault.azure.net/"
		},
		"lgndatalake_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://lgndatalake.dfs.core.windows.net"
		},
		"lnakv_properties_typeProperties_baseUrl": {
			"type": "string",
			"defaultValue": "https://lnakv.vault.azure.net/"
		},
		"sourceBlob_LS_sasUri": {
			"type": "secureString",
			"metadata": "Secure string for 'sasUri' of 'sourceBlob_LS'"
		},
		"lgnssisir_properties_typeProperties_ssisProperties_catalogInfo_catalogServerEndpoint": {
			"type": "string",
			"defaultValue": "lnewport.database.windows.net"
		},
		"lgnssisir_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminUserName": {
			"type": "string",
			"defaultValue": "lnewport"
		},
		"lgnssisir_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminPassword": {
			"type": "secureString"
		},
		"lgnssisir_properties_typeProperties_ssisProperties_customSetupScriptProperties_sasToken": {
			"type": "secureString"
		},
		"containerUri": {
			"type": "string",
			"metadata": "URI to storage account containing linked ARM templates"
		},
		"containerSasToken": {
			"type": "string",
			"metadata": "Sas token to storage account containing linked ARM templates"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "adfln2_ArmTemplate_0",
			"type": "Microsoft.Resources/deployments",
			"apiVersion": "2018-02-01",
			"properties": {
				"mode": "incremental",
				"templateLink": {
					"uri": "[concat(parameters('containerUri'), '/ArmTemplate_0.json', parameters('containerSasToken'))]",
					"contentVersion": "1.0.0.0"
				},
				"parameters": {
					"factoryName": {
						"value": "[parameters('factoryName')]"
					},
					"AzureSqlDWLinkedService_connectionString": {
						"value": "[parameters('AzureSqlDWLinkedService_connectionString')]"
					},
					"AzureSqlDatabaseLinkedService_connectionString": {
						"value": "[parameters('AzureSqlDatabaseLinkedService_connectionString')]"
					},
					"DataMart_connectionString": {
						"value": "[parameters('DataMart_connectionString')]"
					},
					"MyAzureBlobLinkedService_connectionString": {
						"value": "[parameters('MyAzureBlobLinkedService_connectionString')]"
					},
					"WorldWideImportersDW_connectionString": {
						"value": "[parameters('WorldWideImportersDW_connectionString')]"
					},
					"lgndatabricks_accessToken": {
						"value": "[parameters('lgndatabricks_accessToken')]"
					},
					"lgndatalake_accountKey": {
						"value": "[parameters('lgndatalake_accountKey')]"
					},
					"lgnstorage_connectionString": {
						"value": "[parameters('lgnstorage_connectionString')]"
					},
					"linkedService1_connectionString": {
						"value": "[parameters('linkedService1_connectionString')]"
					},
					"lndb_connectionString": {
						"value": "[parameters('lndb_connectionString')]"
					},
					"southridge_connectionString": {
						"value": "[parameters('southridge_connectionString')]"
					},
					"DroughtMonitorAPI_properties_typeProperties_url": {
						"value": "[parameters('DroughtMonitorAPI_properties_typeProperties_url')]"
					},
					"FRED_properties_typeProperties_url": {
						"value": "[parameters('FRED_properties_typeProperties_url')]"
					},
					"NOAAFTPServer_properties_typeProperties_host": {
						"value": "[parameters('NOAAFTPServer_properties_typeProperties_host')]"
					},
					"STLFEDMOIL_properties_typeProperties_url": {
						"value": "[parameters('STLFEDMOIL_properties_typeProperties_url')]"
					},
					"USGSSecretStore_properties_typeProperties_baseUrl": {
						"value": "[parameters('USGSSecretStore_properties_typeProperties_baseUrl')]"
					},
					"lgndatalake_properties_typeProperties_url": {
						"value": "[parameters('lgndatalake_properties_typeProperties_url')]"
					},
					"lnakv_properties_typeProperties_baseUrl": {
						"value": "[parameters('lnakv_properties_typeProperties_baseUrl')]"
					},
					"sourceBlob_LS_sasUri": {
						"value": "[parameters('sourceBlob_LS_sasUri')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "adfln2_ArmTemplate_1",
			"type": "Microsoft.Resources/deployments",
			"apiVersion": "2018-02-01",
			"properties": {
				"mode": "incremental",
				"templateLink": {
					"uri": "[concat(parameters('containerUri'), '/ArmTemplate_1.json', parameters('containerSasToken'))]",
					"contentVersion": "1.0.0.0"
				},
				"parameters": {
					"factoryName": {
						"value": "[parameters('factoryName')]"
					},
					"lgnssisir_properties_typeProperties_ssisProperties_catalogInfo_catalogServerEndpoint": {
						"value": "[parameters('lgnssisir_properties_typeProperties_ssisProperties_catalogInfo_catalogServerEndpoint')]"
					},
					"lgnssisir_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminUserName": {
						"value": "[parameters('lgnssisir_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminUserName')]"
					},
					"lgnssisir_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminPassword": {
						"value": "[parameters('lgnssisir_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminPassword')]"
					},
					"lgnssisir_properties_typeProperties_ssisProperties_customSetupScriptProperties_sasToken": {
						"value": "[parameters('lgnssisir_properties_typeProperties_ssisProperties_customSetupScriptProperties_sasToken')]"
					},
					"AzureBlobFSDataDestinationStore1_properties_typeProperties_folderPath": {
						"value": "[parameters('AzureBlobFSDataDestinationStore1_properties_typeProperties_folderPath')]"
					}
				}
			},
			"dependsOn": [
				"[resourceId('Microsoft.Resources/deployments', 'adfln2_ArmTemplate_0')]"
			]
		},
		{
			"name": "adfln2_ArmTemplate_2",
			"type": "Microsoft.Resources/deployments",
			"apiVersion": "2018-02-01",
			"properties": {
				"mode": "incremental",
				"templateLink": {
					"uri": "[concat(parameters('containerUri'), '/ArmTemplate_2.json', parameters('containerSasToken'))]",
					"contentVersion": "1.0.0.0"
				},
				"parameters": {
					"factoryName": {
						"value": "[parameters('factoryName')]"
					},
					"DestinationFilesBlobStore1_properties_typeProperties_fileName": {
						"value": "[parameters('DestinationFilesBlobStore1_properties_typeProperties_fileName')]"
					},
					"DestinationFilesBlobStore1_properties_typeProperties_folderPath": {
						"value": "[parameters('DestinationFilesBlobStore1_properties_typeProperties_folderPath')]"
					},
					"SinkDataset_properties_typeProperties_fileName": {
						"value": "[parameters('SinkDataset_properties_typeProperties_fileName')]"
					},
					"SinkDataset_properties_typeProperties_folderPath": {
						"value": "[parameters('SinkDataset_properties_typeProperties_folderPath')]"
					},
					"SourceAvailabilityBlobStore1_properties_typeProperties_fileName": {
						"value": "[parameters('SourceAvailabilityBlobStore1_properties_typeProperties_fileName')]"
					},
					"SourceAvailabilityBlobStore1_properties_typeProperties_folderPath": {
						"value": "[parameters('SourceAvailabilityBlobStore1_properties_typeProperties_folderPath')]"
					}
				}
			},
			"dependsOn": [
				"[resourceId('Microsoft.Resources/deployments', 'adfln2_ArmTemplate_1')]"
			]
		},
		{
			"name": "adfln2_ArmTemplate_3",
			"type": "Microsoft.Resources/deployments",
			"apiVersion": "2018-02-01",
			"properties": {
				"mode": "incremental",
				"templateLink": {
					"uri": "[concat(parameters('containerUri'), '/ArmTemplate_3.json', parameters('containerSasToken'))]",
					"contentVersion": "1.0.0.0"
				},
				"parameters": {
					"factoryName": {
						"value": "[parameters('factoryName')]"
					},
					"SourceFilesBlobStore1_properties_typeProperties_fileName": {
						"value": "[parameters('SourceFilesBlobStore1_properties_typeProperties_fileName')]"
					},
					"SourceFilesBlobStore1_properties_typeProperties_folderPath": {
						"value": "[parameters('SourceFilesBlobStore1_properties_typeProperties_folderPath')]"
					},
					"adfdropoff_properties_typeProperties_fileName": {
						"value": "[parameters('adfdropoff_properties_typeProperties_fileName')]"
					},
					"adfdropoff_properties_typeProperties_folderPath": {
						"value": "[parameters('adfdropoff_properties_typeProperties_folderPath')]"
					}
				}
			},
			"dependsOn": [
				"[resourceId('Microsoft.Resources/deployments', 'adfln2_ArmTemplate_2')]"
			]
		},
		{
			"name": "adfln2_ArmTemplate_4",
			"type": "Microsoft.Resources/deployments",
			"apiVersion": "2018-02-01",
			"properties": {
				"mode": "incremental",
				"templateLink": {
					"uri": "[concat(parameters('containerUri'), '/ArmTemplate_4.json', parameters('containerSasToken'))]",
					"contentVersion": "1.0.0.0"
				},
				"parameters": {
					"factoryName": {
						"value": "[parameters('factoryName')]"
					},
					"SqlServer1_connectionString": {
						"value": "[parameters('SqlServer1_connectionString')]"
					}
				}
			},
			"dependsOn": [
				"[resourceId('Microsoft.Resources/deployments', 'adfln2_ArmTemplate_3')]"
			]
		},
		{
			"name": "adfln2_ArmTemplate_5",
			"type": "Microsoft.Resources/deployments",
			"apiVersion": "2018-02-01",
			"properties": {
				"mode": "incremental",
				"templateLink": {
					"uri": "[concat(parameters('containerUri'), '/ArmTemplate_5.json', parameters('containerSasToken'))]",
					"contentVersion": "1.0.0.0"
				},
				"parameters": {
					"factoryName": {
						"value": "[parameters('factoryName')]"
					}
				}
			},
			"dependsOn": [
				"[resourceId('Microsoft.Resources/deployments', 'adfln2_ArmTemplate_4')]"
			]
		}
	]
}